<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pedido Confirmado - 4linhas</title>
  <link rel="stylesheet" href="{{ url_for('static', path='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', path='css/components/header.css') }}">
  <style>
    /* Card base */
    .confirm-card{
      max-width:800px;
      margin:3rem auto;
      padding:2rem;
      background:#fff;
      border-radius:8px;
      box-shadow:0 10px 30px rgba(0,0,0,0.05);
    }
    .confirm-success{font-size:1.4rem;color:#1aab5a}

    /* Items list and item row */
    .items-list{display:flex;flex-direction:column;gap:12px;margin-bottom:1rem}
    .item-row{display:flex;align-items:center;gap:12px;border:1px solid #f2f2f2;padding:12px;border-radius:8px}
    .item-image img{width:72px;height:72px;object-fit:cover;border-radius:6px;display:block}
    .item-content{display:flex;flex-direction:column}
    .item-name{font-weight:700;color:#203647}
    .item-meta{color:#666;margin-top:4px}

    /* Review details */
    dl{margin-top:0.75rem}
    dl dt{font-weight:700}
    dl dd{margin:0 0 0.75rem 0}

    /* Actions */
    .confirm-actions{margin-top:1rem;display:flex;gap:12px;align-items:center;justify-content:center}
    .confirm-actions a{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:0.6rem;padding:0.9rem 1rem;border-radius:8px;text-decoration:none}
    .confirm-actions a .icon{display:inline-block;font-size:1.05rem}
    .confirm-actions .btn-primary .icon{margin-right:6px}
    .confirm-actions .btn-outline .icon{margin-right:6px}

    /* Responsive rules for mobile */
    @media (max-width: 600px){
      .confirm-card{margin:1rem;padding:1rem}
      .confirm-success{font-size:1.1rem}
      .item-row{flex-direction:column;align-items:flex-start}
      .item-image img{width:64px;height:64px}
      .confirm-actions{flex-direction:column}
      .confirm-actions a{width:100%;display:inline-block}
    }
  </style>
</head>
<body>
  {% include 'partials/header.html' %}

  <main>
    <div class="confirm-card">
      {% if pedido %}
        <div class="confirm-success">Pedido <strong>#{{ pedido.id_pedido }}</strong> confirmado!</div>
        <p>Obrigado pela sua compra. Enviaremos atualiza√ß√µes por e-mail sobre o status do pedido.</p>

        <!-- Items -->
        <h4 style="margin-top:1rem;">Itens do pedido</h4>
        {% if itens and itens|length > 0 %}
          <div class="items-list">
            {% for it in itens %}
              <div class="item-row">
                <div class="item-image">
                  {% if it.imagem %}
                    <img src="{{ url_for('static', path='/upload/img/' + it.imagem) }}" alt="{{ it.nome }}">
                  {% else %}
                    <img src="{{ url_for('static', path='assets/logo/4linhas-bg-red.svg') }}" alt="{{ it.nome }}">
                  {% endif %}
                </div>
                <div class="item-content">
                  <div class="item-name">{{ it.nome }}</div>
                  <div class="item-meta">Qtd: {{ it.quantidade }} ‚Äî R$ {{ "%.2f"|format(it.preco_unitario)|replace('.', ',') }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <dl>
          <dt>Valor total:</dt><dd>R$ {{ '%.2f'|format(pedido.valor_total)|replace('.', ',') }}</dd>
          <dt>Endere√ßo de entrega:</dt><dd>{{ pedido.endereco_entrega }} - CEP: {{ pedido.cep_entrega }}</dd>
          <dt>Data:</dt><dd>{{ pedido.data_pedido }}</dd>
        </dl>
        <div class="confirm-actions">
          <a href="{{ url_for('perfil') }}#orders" class="btn-primary" title="Ver meus pedidos">
            <span class="icon">üßæ</span>
            <span>Ver meus pedidos</span>
          </a>
          <a href="{{ url_for('index') }}" class="btn-outline" title="Continuar comprando">
            <span class="icon">üõçÔ∏è</span>
            <span>Continuar comprando</span>
          </a>
        </div>
      {% else %}
        <h2>Nenhum pedido encontrado</h2>
        <p>Se voc√™ acabou de finalizar, tente novamente em alguns segundos.</p>
        <a href="/" class="btn-outline">Voltar √† loja</a>
      {% endif %}
    </div>
  </main>

  {% include 'partials/footer.html' %}
</body>
</html>